<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>ressource-humaine</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
</head>
<body>
   <input type="checkbox" id="menu-toggle">
    <div class="sidebar">
        <div class="side-header">
            <h3>P<span>ersonnel</span></h3>
        </div>
        
        <div class="side-content">
            <div class="profile">
                <div class="profile-img bg-img" style="background-image: url(img/3.jpeg)"></div>
                <h4>David Green</h4>
                <small>Directeur des ressources humaines</small>
            </div>

            <div class="side-menu">
                <ul>
                    <li>
                       <a href="" class="active">
                            <span class="las la-home"></span>
                            <small>Dashboard</small>
                        </a>
                    </li>
                    <li>
                       <a href="">
                            <span class="las la-user-alt"></span>
                            <small>Profile</small>
                        </a>
                    </li>
                    <li>
                       <a href="">
                            <span class="las la-envelope"></span>
                            <small>Mailbox</small>
                        </a>
                    </li>
                    <li>
                       <a href="">
                            <span class="las la-clipboard-list"></span>
                            <small>Projects</small>
                        </a>
                    </li>
                    <li>
                       <a href="">
                            <span class="las la-shopping-cart"></span>
                            <small>Orders</small>
                        </a>
                    </li>
                    <li>
                       <a href="">
                            <span class="las la-tasks"></span>
                            <small>Tâches</small>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        
        <header>
            <div class="header-content">
                <label for="menu-toggle">
                    <span class="las la-bars"></span>
                </label>
                
                <div class="header-menu">
                    <label for="">
                        <span class="las la-search"></span>
                    </label>
                    
                    <div class="notify-icon">
                        <span class="las la-envelope"></span>
                        <span class="notify">4</span>
                    </div>
                    
                    <div class="notify-icon">
                        <span class="las la-bell"></span>
                        <span class="notify">3</span>
                    </div>
                    
                    <div class="user">
                        <div class="bg-img" style="background-image: url(img/1.jpeg)"></div>
                        <span class="las la-power-off"></span>
                        <span>Deconnexion</span>
                    </div>
                </div>
            </div>
        </header>
        
        
        <main>
            
            <div class="page-header">
                <h1>Pharmacie</h1>
                <small>Accueil / Dashboard</small>
            </div>
            
            <div class="page-content">
            
                <div class="analytics">

                    <div class="card">
                        <div class="card-head">
                            <h2 id="total-samples">0</h2>
                            <span class="las la-flask"></span>
                        </div>
                        <div class="card-progress">
                            <small>Nombre total d'échantillons</small>
                            <div class="card-indicator">
                                <div class="indicator one" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-head">
                            <h2 id="tests-count">0</h2>
                            <span class="las la-vials"></span>
                        </div>
                        <div class="card-progress">
                            <small>Nombre de tests effectués</small>
                            <div class="card-indicator">
                                <div class="indicator two" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-head">
                            <h2 id="patients-count">0</h2>
                            <span class="las la-user-injured"></span>
                        </div>
                        <div class="card-progress">
                            <small>Nombre de patients traités</small>
                            <div class="card-indicator">
                                <div class="indicator three" style="width: 65%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-head">
                            <h2 id="staff-count">0</h2>
                            <span class="las la-user-md"></span>
                        </div>
                        <div class="card-progress">
                            <small>Nombre de personnel médical</small>
                            <div class="card-indicator">
                                <div class="indicator four" style="width: 90%"></div>
                            </div>
                        </div>
                    </div>

                </div>


                <div class="records table-responsive">

                    <div class="record-header">
                        <div class="add">
                            
                        </div>

                       
                    </div>

                    <div>
                        <!-- Contenu supplémentaire si nécessaire -->
                    </div>

               
 

    <div class="form-container">
        <div class="card">
            <h2>Créer une Facture</h2>
            <div class="form-group">
                <label for="medicamentName">Nom du Médicament:</label>
                <input type="text" id="medicamentName" />
            </div>
            <div class="form-group">
                <label for="medicamentStock">Quantité:</label>
                <input type="number" id="medicamentStock" />
            </div>
            <div class="form-group">
                <label for="medicamentPrice">Prix (HTG):</label>
                <input type="number" id="medicamentPrice" />
            </div>
            <div class="form-group">
                <label for="medicamentExpiration">Date d'Expiration:</label>
                <input type="date" id="medicamentExpiration" />
            </div>
            <button id="creerFacture">Créer Facture</button>
        </div>

        <div class="card">
            <h2>Fiche de Vente</h2>
            <div class="invoice-card">
                <img src="img/logom.jpg" alt="Logo de la Pharmacie" style="width: 100px;height: auto;margin-bottom: 10px">
                <h2>CLINIMEDIC</h2>
                <h3>Détails de la Facture</h3>
                <div id="factureDetails"></div>
                <h4 id="totalPrice">Total: 0 HTG</h4>
                <button id="printInvoiceButton">Imprimer Fiche de Vente</button>
            </div>
        </div>
    </div>

    <h2>Liste des Médicaments</h2>
    <table>
        <thead>
            <tr>
                <th>Nom du Médicament</th>
                <th>Quantité en Stock</th>
                <th>Prix (HTG)</th>
                <th>Date d'Expiration</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="medicamentList"></tbody>
    </table>
</div>

            
        </main>
        
    </div>

    <style>
     
        .main-content {
            flex: 1;
            padding: 20px;
        }
        h1 {
            color: #28a745;
        }
        .form-container {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .card {
            background-color: #e9ecef;
            border-radius: 10px;
            padding: 15px;
            flex: 1 1 300px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        input, button {
            padding: 10px;
            width: 100%;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #28a745;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        .icon {
            cursor: pointer;
            color: #28a745;
            margin-right: 10px;
        }
        .icon:hover {
            color: #218838;
        }
        .invoice-card {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #28a745;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        .invoice-card h2 {
            color: #28a745;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            .invoice-card, .invoice-card * {
                visibility: visible;
            }
            .invoice-card {
                position: absolute;
                left: 0;
                top: 0;
            }
        }


</style>

  <script>
    let medicaments = [];
    let factures = []; // Array to hold multiple invoices

    document.getElementById('creerFacture').addEventListener('click', function() {
        const medicamentName = document.getElementById('medicamentName').value;
        const medicamentStock = document.getElementById('medicamentStock').value;
        const medicamentPrice = document.getElementById('medicamentPrice').value;
        const medicamentExpiration = document.getElementById('medicamentExpiration').value;

        const medicament = {
            name: medicamentName,
            stock: parseInt(medicamentStock) || 0,
            price: parseFloat(medicamentPrice) || 0,
            expiration: medicamentExpiration,
        };

        medicaments.push(medicament);
        factures.push(medicament); // Add to invoices list
        updateMedicamentTable();
        displayFactures();
        resetForm();
    });

    function updateMedicamentTable() {
        const medicamentList = document.getElementById('medicamentList');
        medicamentList.innerHTML = '';
        medicaments.forEach((medicament, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${medicament.name}</td>
                <td>${medicament.stock}</td>
                <td>${medicament.price} HTG</td>
                <td>${medicament.expiration}</td>
                <td>
                    <button class="edit-button icon" onclick="editMedicament()">Modifier</button>
                    <button class="delete-button icon" onclick="deleteMedicament(${index})">Supprimer</button>
                </td>
            `;
            medicamentList.appendChild(row);
        });
    }

    function displayFactures() {
        const factureDetails = document.getElementById('factureDetails');
        factureDetails.innerHTML = ''; // Clear previous invoices
        let total = 0; // Initialize total variable
        factures.forEach((facture, index) => {
            const subtotal = facture.stock * facture.price; // Calculate subtotal for each invoice
            total += subtotal; // Add to total
            factureDetails.innerHTML += `
                <div>
                    <strong>Facture ${index + 1}:</strong><br>
                    Nom: ${facture.name}<br>
                    Quantité: ${facture.stock}<br>
                    Prix: ${facture.price} HTG<br>
                    Date d'Expiration: ${facture.expiration}<br>
                    <strong>Subtotal: ${subtotal} HTG</strong><br>
                    <hr>
                </div>
            `;
        });
        document.getElementById('totalPrice').innerText = `Total: ${Math.round(total)} HTG`; // Display total rounded
    }

    function resetForm() {
        document.getElementById('medicamentName').value = '';
        document.getElementById('medicamentStock').value = '';
        document.getElementById('medicamentPrice').value = '';
        document.getElementById('medicamentExpiration').value = '';
    }

    function editMedicament() {
        if (medicaments.length === 0) return; // Prevent editing if no medicines are present
        
        // Always edit the first medicine in the list
        const medicament = medicaments[0]; 
        document.getElementById('medicamentName').value = medicament.name;
        document.getElementById('medicamentStock').value = medicament.stock;
        document.getElementById('medicamentPrice').value = medicament.price;
        document.getElementById('medicamentExpiration').value = medicament.expiration;

        // Remove the first medicament from the array after editing
        medicaments.splice(0, 1);
        updateMedicamentTable();
    }

    function deleteMedicament(index) {
        medicaments.splice(index, 1);
        updateMedicamentTable();
    }

    document.getElementById('printInvoiceButton').addEventListener('click', function() {
        window.print();
    });
</script>
</body>
</html>